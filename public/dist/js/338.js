"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[338],{4478:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(3645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,".v-input__prepend-outer{display:none}",""]);const o=r},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=t(e);return e[2]?"@media ".concat(e[2]," {").concat(a,"}"):a})).join("")},e.i=function(t,a,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var i=0;i<t.length;i++){var c=[].concat(t[i]);n&&r[c[0]]||(a&&(c[2]?c[2]="".concat(a," and ").concat(c[2]):c[2]=a),e.push(c))}},e}},3379:(t,e,a)=>{var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}t[e]=a}return t[e]}}(),s=[];function i(t){for(var e=-1,a=0;a<s.length;a++)if(s[a].identifier===t){e=a;break}return e}function c(t,e){for(var a={},n=[],r=0;r<t.length;r++){var o=t[r],c=e.base?o[0]+e.base:o[0],l=a[c]||0,d="".concat(c," ").concat(l);a[c]=l+1;var u=i(d),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(f)):s.push({identifier:d,updater:h(f,e),references:1}),n.push(d)}return n}function l(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var r=a.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function f(t,e,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function v(t,e,a){var n=a.css,r=a.media,o=a.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,p=0;function h(t,e){var a,n,r;if(e.singleton){var o=p++;a=m||(m=l(e)),n=f.bind(null,a,o,!1),r=f.bind(null,a,o,!0)}else a=l(e),n=v.bind(null,a,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(a)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var a=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<a.length;n++){var r=i(a[n]);s[r].references--}for(var o=c(t,e),l=0;l<a.length;l++){var d=i(a[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=o}}}},3191:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});const n={data:function(){return{dataLoading:!1,btnUploadLoading:!1,validateErrMessages:"",btnLoading:!1,faf:"",avatar:"",breadcrumbs:[{text:"Accueil",disabled:!1,to:"/home"},{text:"FAF",disabled:!0}],form:{}}},methods:{onButtonClickUpload:function(){var t=this;this.isSelecting=!0,window.addEventListener("focus",(function(){t.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},uploadFile:function(t){var e=this;this.btnUploadLoading=!0,this.avatar=URL.createObjectURL(t.target.files[0]);var a=new FormData;a.append("avatar",t.target.files[0]),a.append("id",this.form.id),axios.post("faf/update-avatar",a).then((function(){e.btnUploadLoading=!1,e.$success=!0})).catch((function(t){console.log(t),e.btnUploadLoading=!1}))},getFafAccount:function(){var t=this;this.dataLoading=!0,axios.get("/faf").then((function(e){t.faf=e.data,t.form=e.data,t.avatar=e.data.avatar,t.form.password="",t.dataLoading=!1})).catch((function(e){console.log(e),t.dataLoading=!1}))},updateFafAccount:function(){var t=this;this.validateErrMessages="",this.btnLoading=!0,axios.post("/faf/update",this.form).then((function(){t.$error=!1,t.btnLoading=!1,t.$success=!0})).catch((function(e){t.$error=!0,t.$success=!1,t.validateErrMessages=e.response.data.errors,t.btnLoading=!1}))}},created:function(){this.getFafAccount()}};var r=a(3379),o=a.n(r),s=a(4478),i={insert:"head",singleton:!1};o()(s.Z,i);s.Z.locals;const c=(0,a(1900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-main",[a("v-container",{attrs:{fluid:""}},[a("v-card",{staticClass:"mb-3"},[a("v-breadcrumbs",{attrs:{items:t.breadcrumbs,large:""},scopedSlots:t._u([{key:"divider",fn:function(){return[a("v-icon",[t._v("mdi-chevron-right")])]},proxy:!0}])})],1),t._v(" "),t.dataLoading?a("v-row",[a("v-col",{attrs:{lg:"4",md:"4",cols:"12"}},[a("v-sheet",{attrs:{color:"lighten-4"}},[a("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1),t._v(" "),a("v-col",{attrs:{lg:"8",md:"8",cols:"12"}},[a("v-sheet",{attrs:{color:"lighten-4"}},[a("v-skeleton-loader",{attrs:{type:"article, actions"}})],1)],1)],1):a("v-row",[a("v-col",{attrs:{lg:"4",md:"4",cols:"12"}},[a("v-card",{staticClass:"text-center"},[a("v-card-text",[a("v-avatar",{attrs:{size:"100"}},[a("v-img",{attrs:{src:t.avatar,"aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)]},proxy:!0}])})],1),t._v(" "),a("h1",{staticClass:"mt-5"},[t._v(t._s(t.faf.first_name)+"\n                                "),a("span",{staticStyle:{color:"#3e96e3"}},[t._v(t._s(t.faf.last_name))])]),t._v(" "),a("h3",{staticClass:"mt-3 mb-4"},[t._v(t._s(t.faf.email))]),t._v(" "),a("v-btn",{staticClass:"text-none mb-3",attrs:{color:"primary darken-3",loading:t.btnUploadLoading,fab:"",depressed:""},on:{click:t.onButtonClickUpload}},[a("v-icon",[t._v("\n                                    mdi-cloud-upload\n                                ")])],1),t._v(" "),a("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.uploadFile}})],1)],1)],1),t._v(" "),a("v-col",{attrs:{lg:"8",md:"8",cols:"12"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.updateFafAccount.apply(null,arguments)}}},[a("v-card",{staticClass:"text-center"},[a("v-card-text",[a("v-row",[a("v-col",{attrs:{lg:"6",md:"6",cols:"12"}},[a("v-text-field",{attrs:{outlined:"",dense:"",label:"Nom *","error-messages":t.validateErrMessages.first_name},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1),t._v(" "),a("v-col",{attrs:{lg:"6",md:"6",cols:"12"}},[a("v-text-field",{attrs:{"error-messages":t.validateErrMessages.last_name,outlined:"",dense:"",label:"Prenom *"},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"error-messages":t.validateErrMessages.email,outlined:"",dense:"",label:"Email *"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{"error-messages":t.validateErrMessages.password,outlined:"",dense:"",label:"Mot de passe *"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mb-3",attrs:{color:"primary",type:"submit",loading:t.btnLoading}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n                                    Enregistrer\n                                ")],1)],1)],1)],1)])],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);